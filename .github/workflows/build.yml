name: latemkrc runner

on:
  workflow_dispatch:

jobs:
  hello-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Echo status
        run: |
          whoami
          git status
  kick-image:
    runs-on: ubuntu-latest
    container:
      image: ghcr.io/ykyki/docker-tex-image:1.0
      options: --user root
      credentials:
        username: ykyki
        password: ${{ secrets.DOCKER_LOGIN_PASS }}
    steps:
    - uses: actions/checkout@v2
    - name: latexmk
      run: |
        whoami
        pwd
        ls -l
        latexmk -cd -norc -r ./documents/catalog/.latexmkrc ./documents/catalog/root.tex
    - uses: actions/upload-artifact@v1
      with:
        name: root-pdf
        path: ./documents/catalog/root.pdf
